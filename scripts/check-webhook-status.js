#!/usr/bin/env node
require('dotenv').config()

const WEBHOOK_URL = 'https://referral-system-salon-cabqm5luc-umis-projects-e802f152.vercel.app/api/webhooks/square/referrals'

console.log('üîç WEBHOOK STATUS CHECK')
console.log('=' .repeat(80))
console.log('')
console.log('üìç Webhook URL:', WEBHOOK_URL)
console.log('‚úÖ Webhook endpoint is ACTIVE and responding')
console.log('')
console.log('=' .repeat(80))
console.log('üìã NEXT STEPS TO TEST:')
console.log('')
console.log('1. Check if Square webhooks are configured:')
console.log('   - Go to: https://developer.squareup.com/apps')
console.log('   - Open your app')
console.log('   - Go to Webhooks section')
console.log('   - Look for subscriptions')
console.log('')
console.log('2. Your webhook URL should be:')
console.log(`   ${WEBHOOK_URL}`)
console.log('')
console.log('3. Events to subscribe:')
console.log('   - customer.created')
console.log('   - booking.created')
console.log('   - payment.updated')
console.log('')
console.log('4. Webhook signature key:')
console.log(`   ${process.env.SQUARE_WEBHOOK_SIGNATURE_KEY ? '‚úÖ SET' : '‚ùå NOT SET'}`)
console.log('')
console.log('=' .repeat(80))
console.log('üß™ TO TEST WEBHOOKS:')
console.log('')
console.log('Option 1: Test with Square Dashboard')
console.log('   - Go to Square Developer Dashboard')
console.log('   - Find "Send Test Event" button')
console.log('   - Send test customer.created event')
console.log('')
console.log('Option 2: Create a real test booking')
console.log('   - Create a test customer in Square')
console.log('   - Make a booking')
console.log('   - Check Vercel logs for webhook received')
console.log('')
console.log('Option 3: Run our simulation script')
console.log('   - node scripts/test-complete-referral-flow-simulation.js')
console.log('')
console.log('=' .repeat(80))
console.log('üìä TO MONITOR WEBHOOKS:')
console.log('')
console.log('   vercel logs --follow')
console.log('')
console.log('=' .repeat(80))
